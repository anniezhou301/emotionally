<html>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/style.css" />
<img src="empathee.png" alt="logo" style="margin-left:300px;width:656px;height:192px;">
<form action="/" method="post">

  <textarea class= "center" id="message" name="message" type="text" value="" placeholder="Enter text to analyze feelings..."></textarea><br/>
  <input class= "center-button" type="submit" value="Analyze"/>
</form>
<p style="margin-left:550px; margin-top:50px; font-size: 20px" id="hide"><big> emotions detected...</big> </p>

<div class="container">
  <div class="row">

<div class="col-md-2 col-md-offset-1"> <div id="happy"> </div> <p id="p1">Percentage:</p><p id="label1">Happiness</p> </div>
<div class="col-md-2"><div id="sadness"></div>
<p id="p2"></p><p id="label2">Sadness</p>
</div>
<div class="col-md-2"><div id="anger"></div>
<p id="p3"></p><p id="label3">Anger</p>
</div>
<div class="col-md-2"><div id="disgust"></div>
<p id="p4"></p><p id="label4">Disgust</p>
</div>
<div class="col-md-2"><div id="fear"></div>
<p id="p5"></p><p id="label5">Fear</p>
</div>
</div>
</div>

<script
  src="https://code.jquery.com/jquery-3.2.1.slim.js"
  integrity="sha256-tA8y0XqiwnpwmOIl3SGAcFl2RvxHjA8qp0+1uCGmRmg="
  crossorigin="anonymous"></script>


<script>  

  var joy = <%- JSON.stringify(joy) %>;
  var sadness = <%- JSON.stringify(sadness) %>;
  var anger = <%- JSON.stringify(anger) %>;
  var disgust = <%- JSON.stringify(disgust) %>;
  var fear = <%- JSON.stringify(fear) %>;
  var showgraph = <%- JSON.stringify(show) %>;
  var fill_happy = 0;
  var fill_sadness = 0;
  var fill_anger = 0;
  var fill_disgust = 0;
  var fill_fear = 0;

  $("p").hide();
  if(showgraph){
    $("p").show();

  }



    var update = setInterval(function() {
      fill_happy += 1;
      if (fill_happy <= joy*200) {
        $('#happy').css('height', (fill_happy+"px")); 
        } 
      else {
        clearInterval(update);        
      }
    }, 10);

    var update2 = setInterval(function() {
      fill_sadness += 1;
      if (fill_sadness <= sadness*200) {
        $('#sadness').css('height', (fill_sadness+"px")); 
        } 
      else {
        clearInterval(update2);        
      }
    }, 10);

    var update3 = setInterval(function() {
      fill_anger += 1;
      if (fill_anger <= anger*200) {
        $('#anger').css('height', (fill_anger+"px")); 
        } 
      else {
        clearInterval(update3);        
      }
    }, 10);

    var update4 = setInterval(function() {
      fill_disgust += 1;
      if (fill_disgust <= disgust*200) {
        $('#disgust').css('height', (fill_disgust+"px")); 
        } 
      else {
        clearInterval(update4);        
      }
    }, 10);

    var update5 = setInterval(function() {
      fill_fear += 1;
      if (fill_fear <= fear*200) {
        $('#fear').css('height', (fill_fear+"px")); 
        } 
      else {
        clearInterval(update5);        
      }
    }, 10);


    console.log(joy, sadness, anger, disgust, fear);

</script>
</html>

